## Average Pool
### Input Dimension - 64x32x32
### Output Dimension - 64x32x32
Average pool can be done efficiently using the accelerator. Synthetic weight of below kernel can be generated by putting all the weights to 1 and filter masking the bottom and right part of the kernel.
```
1 1 0
1 1 0
0 0 0
```
Depthwise mode requires 34x34 input data. Thus, by default the golden model will use 34x34 input patch. However, to use 32x32 patch we will need to export the 32x32 patch using the following changes to the infeat_export.c file. 
```
   file_ << "uint8_t ne16_infeat[] = {" << std::endl;
    for(auto i=0; i<this->h_in*this->stride-2*this->stride; i++) {
      for(auto j=0; j<this->w_in*this->stride-2*this->stride; j++) {

```
The stimuli is generated using
```
make stimuli AVG_POOL=1 NEGATIVE_WEIGHT=0 K_IN=64 K_OUT=64 H_OUT=32 W_OUT=32 FS=3 QW=2 NO_NORM_QUANT=0 NORM_BITS=8 QUANT_BITS=8 NORM_SHIFT=1 NORM_BIAS=0 USE_ROUNDING=0 USE_RELU=0 PADDING_TOP=0 PADDING_RIGHT=6 PADDING_BOTTOM=6 PADDING_LEFT=0 PADDING_VALUE=0 STREAMIN=0 FILTER_MASK_TOP=0 FILTER_MASK_RIGHT=1 FILTER_MASK_BOTTOM=1 FILTER_MASK_LEFT=0 DEPTHWISE=1 MODE16=0 MODE_LINEAR=0 WEIGHT_DEMUX=1 ACTIVATION_PREFETCH=1 SIGNED_ACTIVATION=1 STRIDE=1 FEATURE_FROM_FILE=0
```
Additionally, the infeat.d1_stride needs to be modified from 64*34 to 64*32. Simulation is run using 
```
make build-sw sim gui=1 AVG_POOL=1 NEGATIVE_WEIGHT=0 K_IN=64 K_OUT=64 H_OUT=32 W_OUT=32 FS=3 QW=2 NO_NORM_QUANT=0 NORM_BITS=8 QUANT_BITS=8 NORM_SHIFT=1 NORM_BIAS=0 USE_ROUNDING=0 USE_RELU=0 PADDING_TOP=0 PADDING_RIGHT=6 PADDING_BOTTOM=6 PADDING_LEFT=0 PADDING_VALUE=0 STREAMIN=0 FILTER_MASK_TOP=0 FILTER_MASK_RIGHT=1 FILTER_MASK_BOTTOM=1 FILTER_MASK_LEFT=0 DEPTHWISE=1 MODE16=0 MODE_LINEAR=0 WEIGHT_DEMUX=1 ACTIVATION_PREFETCH=1 SIGNED_ACTIVATION=1 STRIDE=1 FEATURE_FROM_FILE=0
```
